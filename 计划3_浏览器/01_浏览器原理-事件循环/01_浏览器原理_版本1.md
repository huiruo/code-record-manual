
# 参考
https://zhuanlan.zhihu.com/p/140700610
基础：
```
进程可以理解成正在执行的应用程序；

线程呢，可以理解成我们应用程序中的代码的执行器；

二者关系：
线程是跑在进程里面的，一个进程里面可能有一个或者多个线程，而一个线程，只能隶属于一个进程。

计算机启动了一个进程，进程启动后，CPU会给该进程分配相应的内存空间，当我们的进程得到了内存之后，就可以使用线程进行资源调度，进而完成我们应用程序的功能。
启动的进程会创建另外的新的进程来处理其他任务，这些创建出来的新的进程拥有全新的独立的内存空间，不能与原来的进程内向内存，如果这些进程之间需要通信，可以通过IPC机制（Inter Process Communication）来进行
```

# 浏览器的多进程架构
```
很多应用程序都会采取这种多进程的方式来工作，因为进程和进程之间是互相独立的它们互不影响.

在Chrome中，主要的进程有4个：

-浏览器进程 (Browser Process)：负责浏览器的TAB的前进、后退、地址栏、书签栏的工作和处理浏览器的一些不可见的底层操作，比如网络请求和文件访问。
-渲染进程 (Renderer Process)：负责一个Tab内的显示相关的工作，也称渲染引擎。
-插件进程 (Plugin Process)：负责控制网页使用到的插件
-GPU进程 (GPU Process)：负责处理整个应用程序的GPU任务
```
### 4个进程之间的关系
```
输入URL，这个时候(A)Browser Process会向这个URL发送请求，获取这个URL的HTML内容，

然后将HTML交给(B)Renderer Process，(B)Renderer Process解析HTML内容，解析遇到需要请求网络的资源又返回来交给(A)Browser Process进行加载，
同时通知(A)Browser Process，需要(C)Plugin Process加载插件资源，执行插件代码。解析完成后，

(B)Renderer Process计算得到图像帧，并将这些图像帧交给(D)GPU Process，(D)GPU Process将其转化为图像显示屏幕。
```

### Chrome为什么要使用多进程架构
```
1.容错性,有些BUG会直接导致渲染引擎崩溃，多进程架构使得每一个渲染引擎运行在各自的进程中，相互之间不受影响，也就是说，当其中一个页面崩溃挂掉之后，不影响其他
2.更高的安全性和沙盒性：渲染引擎会经常性的在网络上遇到不可信、甚至是恶意的代码，它们会利用这些漏洞在你的电脑上安装恶意的软件，针对这一问题，浏览器对不同进程限制了不同的权限，并为其提供沙盒运行环境，
3.更高的响应速度：在单进程的架构中，各个任务相互竞争抢夺CPU资源
```

### 浏览器的进程模式
一个Tab，就会有一个Renderer Process，这些进程之间的内存无法进行共享，而不同进程的内存常常需要包含相同的内容。
为了节省内存，Chrome提供了四种进程模式,不同的进程模式会对 tab 进程做不同的处理。
```
Process-per-site-instance (default) - 同一个 site-instance 使用一个进程
Process-per-site - 同一个 site 使用一个进程
Process-per-tab - 每个 tab 使用一个进程
Single process - 所有 tab 共用一个进程
```

